# ERC20 based Hardhat Project

## Important Files

### Branch Name: dev_NewWagmiIplementation = Migrating to Wagmi version 2 Work in progress(updated on Jan/18/2024)
[FrontEnd - NextjsApp repo](https://github.com/BlockchainDeveloper009/defi_jul2_sol_hd_ts/tree/dev_NewWagmiIplementation/frontend/will_settler_ui)
[Backend | Contract Implementation repo](https://github.com/BlockchainDeveloper009/defi_jul2_sol_hd_ts/tree/dev_NewWagmiIplementation)

## Summary of the Project:

Note: As of Jan 20,2024, currently project is undergoing migrating to Wagmi2

Status: 

P1: Core features suches as Asset Creation, Will Creation, Manual Settlement, Cancellation are implemented

P2: [P2 - Next in queue to work on][P2]

P3: [P3 items][P3]

P4: [p4 Items][P4]


Core Functionality:

WillsCreatorFactory - this contract enables users to create assets(transfer 10 MATIC from your account to contract), then create wills to provide start date,benefitor, and end date which is the timeline by when, smartcontract wlll
liquidate the funds to assigned benefitors.


Note: This is just a showcase Project at the moment.

Name         | Role:
----------------------

#Scenario1:

uncle Robert | Will creator or Asset Creator
Jack         | Benefitor

#Scenario2:

Bruce Willis | Anonymous donator
Dennis       | Orphan who needs money for his education

>> ##Implemented:

1. Robert create's an asset for eg. 'crypto 4 ETH' with id 'ca-0' with status 'Available':

```
Different tokens can be implemented | Phase2 Feature
```

2. Using 'ca-0', Robert can create a will [with id '0', autogenerated], with maturity date for this will to be active

2% will be collected as fees along with gas to carry out the operation.
```
status of 'ca-0' will be changed to assigned
```

3. On reaching maturity date, smart contract will settle the asset to Benefitor.
```
No Fees will be colected
```

4. if Robert wants to change benefitor, thats not possible, however he can cancel the will.
```
2% Fees will be collected
```

5. If Robert wants to liquidate before the maturity date, then he can settle manually to Benefitor.
```
No Fees | N/I
```

6. If Robert cancels the will, then money will be liquidated to his original wallet. 
Fees 2% will be collected as charge

```
only Robert as owner of the will can cancel this will. [MultiSign can be added to authorize the txn, in #phase3]
Will/Txn status - to be udpated | Phase2 Feature
asset status - to be udpated || Phase2 Feature

Fees: 

```

7. Admin can see contract balance

>> ## Yet to Implement

[P2]: #p2

- If user enters 100BTC, then check user account has collect Asset amount entered by asset creator during asset creation, at the momment its hardcoded.

- Oracle, Chainlink automation to settle wills
- create api, History table for Assets to track changes by date
- Build Admin page which displays Contract's account balance.

[P3]: #P3
- create api, History table for Wills to track changes by audit info such as datetime
- create api, to create reports on wills settled for this month
- create api, to create reports on wills about to settle for this week.

[P4]: #P4
- MultiSig for making changes to Wills in future
- Multi chain
- Interoperability for funds transfer
- to work with Multiple tokens (now for testing lets stick to Matic, since value is low)

Admin Page functionalities:
a) check contract balance.
Provide override feature for contract owner, if there is a trouble such as hanging amount or in case of bug situations.

Request a feature form:

Legions:
N/I - Yet to Implement / Not Implemented /

### Highlights 

WillCreatorFactory smart contract is created by following best practises of using
events, error, 

Chainlink automation | 
Inheritance         |

mocha chai library tests | using ethers of hardhat, unitests are written


Try running some of the following tasks:

```shell
npx hardhat help
npx hardhat test
REPORT_GAS=true npx hardhat test
npx hardhat node
npx hardhat run scripts/deploy.js
# to run typescript files
ts-node ./scripts/gasEstimater.ts
#to switch node versions
nvm list
nvm use 16.0.0
nvm --vesrion

#to run a script/task  from package.json
npm run deploy_to_mumbai

#to run a script/task  from package.json
npm run deploy_locally

#to start hardhat localhost on local machine
npx hardhat node

#to run a js script from 
node ./scripts/gasEsitmater.js

#to run a playwright script
npx playwright test "index_in_youtube.spec.ts"  ui-headed project=chromium

```
## Run Tests

### Local Network

```
npx hardhat test .\test\test_willSettler_23Jul02\unittest_willSettler\localnewtork.WillCreator.test.js --network localhost
```
### Run single test [make one of describe.only]

```
npx hardhat test .\test\test_willSettler_23Jul02\unittest_willSettler\localnewtork.WillCreator.test.js --network localhost 
```
### Config learnings:

```hardhat.config: set paths of contract & test folders
module.exports = {
  // other configuration options...
  paths: {
    sources: "./contracts", // Path to your contract source files
    artifacts: "./artifacts", // Path to your contract artifact files
    cache: "./cache", // Path to your cache directory (optional)
    tests: "./test", // Path to your test files (optional)
  },
  // other configuration options...
};

```

```packagejson.config


```

 #1. HardhatError: HH700: Artifact for contract [is missing or contract path not set correcntly]










